<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Title of the document</title>
<script src="../build/duet.js"></script>
<script type="text/javascript">

	function onDocLoad() {
		function AppViewModel(type) {
		    this.type = type;
		    this.data = [
		        { name: 'Alfred', position: 'Butler', location: 'London' },
		        { name: 'Bruce', position: 'Chairman', location: 'New York' }
		    ];
		    this.flipData = function () {
		        var starttime = new Date().getTime();
		        if(type === "deferred")
		        	this._data.ignore = true;

		        for (var i = 0; i < 999; i++) {
		            this.data = this.data.reverse();
		        }

		        if(type === "deferred"){
			        this._data.ignore = false;
			        this._data.dispatchChangeEvent();
		        }
		        
		        this.timing = (new Date().getTime() - starttime) + ' ms';
		    }
		    this.timing = ''
		}

		view = new ModelView("deferred", { examples: [new AppViewModel("deferred"), new AppViewModel("standard")] });
	}
	
</script>
</head>

<body onload="onDocLoad();">
	<div data-dt="deferred" data-dt-children="examples">
		<div>
		    <table>
		        <tbody data-dt="children" data-dt-children="data">
		            <tr>
		                <td data-dt="children" data-dt-innerHTML="name"></td>
		                <td data-dt="children" data-dt-innerHTML="position"></td>
		                <td data-dt="children" data-dt-innerHTML="location"></td>
		            </tr>
		        </tbody>
		    </table>
		    <button data-dt="children" data-dt-onclick="flipData" data-dt-innerHTML="type"></button>
		    <div class="time" data-dt="children"  data-dt-innerHTML="timing"></div>
	    </div>
	</div>
</body>

</html>
